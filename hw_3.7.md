# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
- Linux:
```shell
ip -br link
```
```
vagrant@netology1:~$ ip -br link
lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
eth0             UP             08:00:27:73:60:cf <BROADCAST,MULTICAST,UP,LOWER_UP>
eth1             UP             08:00:27:2c:bd:98 <BROADCAST,MULTICAST,UP,LOWER_UP>
```
- Windows:
```commandline
ipconfig
```
2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
- протокол: LLDP
- пакет: lldpd
- команды:
```shell
vagrant@netology1:~$ lldp [Tab] [Tab]
lldpcli  lldpctl  lldpd
```
3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
- технология: VLAN
- пакет: vlan
- пример конфига: https://wiki.ubuntu.com/vlan
```shell
$ sudo su -c 'echo "8021q" >> /etc/modules'
$ cat << EOF | sudo tee /etc/network/interfaces
auto eth1.10
iface eth1.10 inet static
    address 10.0.0.1
    netmask 255.255.255.0
    vlan-raw-device eth1
EOF

```
- навешиваем vlan 10 на eth1
4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
- типы агрегации:
  - статическая (на Cisco mode on)
  - динамическая – LACP (Link Aggregation Control Protocol) протокол (на Cisco mode active)
- режимы (mode):
  - balance-rr(0)	
    - Политика round-robin. Эта политика применяется для балансировки нагрузки и отказоустойчивости.
  - active-backup(1) 	
    - Политика активный-резервный. Эта политика применяется для отказоустойчивости.
  - balance-xor(2) 	
    - Политика XOR. Передача распределяется между сетевыми картами используя формулу: [( «MAC адрес источника» XOR «MAC адрес назначения») по модулю «число интерфейсов»]. Политика XOR применяется для балансировки нагрузки и отказоустойчивости.
  - broadcast(3) 	 
    - Широковещательная политика. Передает всё на все сетевые интерфейсы. Эта политика применяется для отказоустойчивости.
  - 802.3ad(4) 	
    - Политика агрегирования каналов по стандарту IEEE 802.3ad. Создаются агрегированные группы сетевых карт с одинаковой скоростью и дуплексом. При таком объединении передача задействует все каналы в активной агрегации, согласно стандарту IEEE 802.3ad. Выбор через какой интерфейс отправлять пакет определяется политикой, по умолчанию XOR политика, можно использовать «xmit_hash» политику.
  - balance-tlb(5)	
    - Политика адаптивной балансировки нагрузки передачи. Исходящий трафик распределяется в зависимости от загруженности каждой сетевой карты (определяется скоростью загрузки). Не требует дополнительной настройки на коммутаторе. Входящий трафик приходит на текущую сетевую карту. Если она выходит из строя, то другая сетевая карта берёт себе MAC адрес вышедшей из строя карты.
- пример конфига в /etc/network/interfaces 
```
 # Define slaves   
 auto eth0
 iface eth0 inet manual
     bond-master bond0
     bond-primary eth0
     bond-mode active-backup

 auto wlan0
 iface wlan0 inet manual
     wpa-conf /etc/network/wpa.conf
     bond-master bond0
     bond-primary eth0
     bond-mode active-backup

 # Define master
 auto bond0
 iface bond0 inet dhcp
     bond-slaves none
     bond-primary eth0
     bond-mode active-backup
     bond-miimon 100
```
5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
```shell
vagrant@netology1:~$ ipcalc 10.0.0.0/29
Address:   10.0.0.0             00001010.00000000.00000000.00000 000
Netmask:   255.255.255.248 = 29 11111111.11111111.11111111.11111 000
Wildcard:  0.0.0.7              00000000.00000000.00000000.00000 111
=>
Network:   10.0.0.0/29          00001010.00000000.00000000.00000 000
HostMin:   10.0.0.1             00001010.00000000.00000000.00000 001
HostMax:   10.0.0.6             00001010.00000000.00000000.00000 110
Broadcast: 10.0.0.7             00001010.00000000.00000000.00000 111
Hosts/Net: 6                     Class A, Private Internet
```
- 8 IP адресов (6 host + 1 network + 1 broadcast)
```shell
vagrant@netology1:~$ ipcalc 10.0.0.0/24
Address:   10.0.0.0             00001010.00000000.00000000. 00000000
Netmask:   255.255.255.0 = 24   11111111.11111111.11111111. 00000000
Wildcard:  0.0.0.255            00000000.00000000.00000000. 11111111
=>
Network:   10.0.0.0/24          00001010.00000000.00000000. 00000000
HostMin:   10.0.0.1             00001010.00000000.00000000. 00000001
HostMax:   10.0.0.254           00001010.00000000.00000000. 11111110
Broadcast: 10.0.0.255           00001010.00000000.00000000. 11111111
Hosts/Net: 254                   Class A, Private Internet
```
- сеть /24 = 256 IP адресов
- сеть /29 = 8 IP адресов
- 256 / 8 = 32 сети

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
- использовать подсеть 100.64.0.0/26
```shell
vagrant@netology1:~$ ipcalc 100.64.0.0/27
Address:   100.64.0.0           01100100.01000000.00000000.000 00000
Netmask:   255.255.255.224 = 27 11111111.11111111.11111111.111 00000
Wildcard:  0.0.0.31             00000000.00000000.00000000.000 11111
=>
Network:   100.64.0.0/27        01100100.01000000.00000000.000 00000
HostMin:   100.64.0.1           01100100.01000000.00000000.000 00001
HostMax:   100.64.0.30          01100100.01000000.00000000.000 11110
Broadcast: 100.64.0.31          01100100.01000000.00000000.000 11111
Hosts/Net: 30                    Class A
```
7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
- Windows:
  - Посмотреть ARP таблицу: `arp -a`
  - Очистить ARP кеш: `netsh interface ip delete arpcache`
  - Удалить только один IP: `arp -d xxx.xxx.xxx.xxx`   
- Linux:
  - Посмотреть ARP таблицу: `ip neigh`
  - Очистить ARP кеш: `ip neigh flush all`
  - Удалить только один IP: `ip neigh del xxx.xxx.xxx.xxx dev eth0`
