# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

## Ответ 1

В случае **аппаратной** виртуализации, сам гипервизор является "ОС" и обеспечивает прямой доступ к устройствам хоста для ВМ. Позволяет запускать различные виртуальные ОС на хостовой машине. 

В случае **паравиртуализации** гипервизору требуется ОС для доступа к ресурсам системы. Так же, гипервизору необходимо особым образом модифицировать ядро гостевой ОС для осуществления этого взаимодействия. Позволяет запускать различные виртуальные ОС на хостовой машине.  

В случае **виртуализации на основе ОС** - появляется возможность запускать изолированные и безопасные ВМ. Позволяет запускать только виртуальные ОС с ядром аналогичным по типу ядру на хостовой машине.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

## Ответ 2

- Высоконагруженная база данных, чувствительная к отказу.
  - физические сервера, т.к. есть критерий "чувствительная к отказу", а чем меньше слоев и абстракций.. тем меньше потенциальных точек отказа. 
- Различные web-приложения.
  - паравиртуализация, возможность запускать "различные" web-приложения, в т.ч. и в ВМ с "различными" ядрами.
- Windows системы для использования бухгалтерским отделом.
  - зависит от основы инфраструктуры:
    - linux - паравиртуализация, т.к. необходимо запускать "иное" ядро
    - windows - паравиртуализация/виртуализация уровня ОС, т.к. в 90% случаев это будет Hyper-V.
- Системы, выполняющие высокопроизводительные расчеты на GPU.
  - физические сервера. для расчетов на GPU альтернатив пока нет

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

## Ответ 3

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
   - Раз у нас "Преимущественно Windows based инфраструктура", то Hyper-V это default. Плюс он удовлетворяет всем требованиям.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
   - как только встретили в одном ТЗ "open source", "бесплатное" и "наиболее производительное" - смело выбираем Xen
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
   - как только встретили в одном ТЗ "Windows", "бесплатное" и "наиболее производительное" - смело выбираем Xen
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
   - KVM или Xen. Подойдут оба, но у KVM ниже порорг вхождения, что предпочтительнее для "тестирования"

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

## Ответ 4

1. требуется в два раз больше ресурсов (в т.ч. человеческих) на поддержание 2х разных сред виртуализации
2. требуется в 2 раза больше кода (а это, автоматически, в 2 раза увеличивает риск возникновения ошибки на этапе написания) при автоматизации и поддержке процессов в 2х разных средах виртуализации
3. несовместимости ВМ обслуживаемых виртуальными средами (например, при переносе ВМ из одного гипервизора в другой могут потребоваться дополнительные действия: конвертации, доустановки драйверов и т.д.. не говоря уже о том, что о "живой миграции" практически и речи не идет.)

Для минимизации рисков и проблем необходимо стараться использовать единую систему управления виртуализацией.
При наличии выбора, всегда необходимо стремиться к гомогенной среде управления виртуализацией, максимально соответствующей инфраструктуре компании. 