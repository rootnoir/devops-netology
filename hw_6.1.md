# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
  - `Реляционная СУБД с возможностью работы с JSON (MySQL/Postgres). Но, в зависимости от задачи, для JSON-чеков может отлично подойти Elasticsearch`
- Склады и автомобильные дороги для логистической компании
  - `Любая реляционная СУБД`
- Генеалогические деревья
  - `Иерархическая СУБД`
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
  - `В настоящее время, при сочетании "кеш" и "ограничение времени жизни" лучшее решение - Redis. Так же, может подойти Memcached`
- Отношения клиент-покупка для интернет-магазина
  - `Реляционная СУБД. Связи подобного рода - её конёк.`

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
  - `CAP: CA` : Каждый узел всегда успешно выполняет запросы - (availability). Даже если между узлами нет связи, они продолжают работать независимо друг от друга - (partition tolerance).

- При сетевых сбоях, система может разделиться на 2 раздельных кластера
  - `CAP: PA` : Каждый узел всегда успешно выполняет запросы - (availability). Даже если между узлами нет связи, они продолжают работать независимо друг от друга - (partition tolerance).

- Система может не прислать корректный ответ или сбросить соединение
  - `CAP: PC` : Даже если между узлами нет связи, они продолжают работать независимо друг от друга - (partition tolerance). Доступность сервера жертвуется в угоду целостности данных - (consistency).

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
  - `PACELC: PC/EC` : При разделении недоступна консистентность (consistency), иначе - консистентность (consistency).
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
  - `PACELC: PA/EL` : При разделении система доступна (availability), иначе - высокая скорость ответа (latency)
- Система может не прислать корректный ответ или сбросить соединение
  - `PACELC: PC/EC` : При разделении недоступна консистентность (consistency), иначе - консистентность (consistency).

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
    
- `Согласно пройденной лекции, принципы ACID и BASE противопоставимы друг другу.. Тем не менее, это не исключает возможность сочетания принципов в одной системе, вопрос лишь в количественном отношении этого "сочетания"`

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?
    
   - `Redis`
   - `Возможные минусы:`
     - `сохранение сообщений, которые не были получены подписчиками, в случае проблем.`
     - `после восстановления соединения подписчиком, определение какие сообщения были получены, а какие нет.`